(this["webpackJsonppacman-reactjs"]=this["webpackJsonppacman-reactjs"]||[]).push([[0],[,,,,,,function(e,t,a){},,,function(e,t,a){e.exports=a.p+"static/media/eatpill.083d62b4.ogg"},function(e,t,a){e.exports=a.p+"static/media/opening_song.f653b7b5.ogg"},function(e,t,a){e.exports=a.p+"static/media/die.70171cce.ogg"},function(e,t,a){e.exports=a.p+"static/media/eatghost.45f4836c.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.short.36b2a2b3.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.b8372a5b.ogg"},function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(20),a(1)),s=a(5),l=a(2),u=a(9),d=a.n(u),b=a(10),f=a.n(b),g=a(11),m=a.n(g),p=a(12),v=a.n(p),h=a(13),j=a.n(h),O=a(14),y=a.n(O),E=Object(n.forwardRef)((function(e,t){var a=e.audioFiles,o=(e.soundDisabled,e.game,Object(n.useState)([])),i=Object(l.a)(o,2),c=i[0],s=(i[1],Object(n.useState)([])),u=Object(l.a)(s,2),d=u[0],b=(u[1],Object(n.useState)([])),f=Object(l.a)(b,2),g=f[0],m=f[1];Object(n.useCallback)((function(e){var t,n=[],r=!1;if(a&&0!==a.length){for(a[e].removeEventListener("ended",c[e],!0),t=0;t<g.length;t++)!r&&g[t]?r=!0:n.push(g[t]);m(n)}}),[a,c,g]),Object(n.useCallback)((function(e,t,n){e.loaded===e.total&&"function"===typeof n&&(n(),a[t].removeEventListener("canplaythrough",d[t],!0))}),[a,d]);return Object(n.useImperativeHandle)(t,(function(){return{play:function(e,t,a){if(!t)return null;var n;if(document.getElementById(e+"_audio")){(n=document.getElementById(e+"_audio")).playbackRate=1.5;var r=n.play();void 0!==r&&r.then((function(e){console.log("Audio actived")})).catch((function(e){console.log("Audio load prevented")}))}else(n=document.createElement("audio")).setAttribute("id",e+"_audio"),n.setAttribute("preload","true"),n.setAttribute("autobuffer","true"),n.setAttribute("src",t),n.autoplay=!0,n.load(),n.addEventListener("load",(function(){n.play()}),!0);document.body.appendChild(n)},disableSound:function(){for(var e=0;e<g.length;e++)a[g[e]].pause(),a[g[e]].currentTime=0;m([])},pause:function(){for(var e=0;e<g.length;e++)a[g[e]].pause()},resume:function(){for(var e=0;e<g.length;e++)a[g[e]].play()}}}),[a,g]),r.a.createElement("div",{className:"audio_empty",ref:t})})),w=(a(6),Object(n.forwardRef)((function(e,t){return e.board.map((function(e,t){return r.a.createElement("div",{className:"row"},e.map((function(e,t){var a="square";return 0===e&&(a="square"),1===e&&(a="square wall"),2===e&&(a="square dot"),3===e&&(a="square power dot"),r.a.createElement("div",{className:a})})))}))}))),x=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({x:14,old_x:14,y:14,old_y:14,direction:"up",isExitHouse:!1}),o=Object(l.a)(a,2),i=o[0],u=o[1],d=Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.board[a][t+1]),"left"===n&&(r=e.board[a][t-1]),"down"===n&&(r=e.board[a+1][t]),"up"===n&&(r=e.board[a-1][t]),r}),[e]),b=Object(n.useCallback)((function(t,a,n,r,o){var l=t,b=a,f=Object(s.a)(e.board),g=i.isExitHouse?["up","down","left","right"]:["left","right"],m=d(l,b,o),p=g[Math.floor(Math.random()*g.length)];if(1!==m){var v=l,h=b,j=i.score;1!==m&&("right"===o&&l<27&&(v+=1),"left"===o&&l>0&&(v-=1),"down"===o&&b<30&&(h+=1),"up"===o&&b>0&&(h-=1)),u({x:v,y:h,board:f,old_x:l,old_y:b,direction:o,score:j,sign:n?Math.sign(n):Math.sign(r),isExitHouse:i.isExitHouse})}else u(Object(c.a)(Object(c.a)({},i),{},{direction:p,isExitHouse:!0}))}),[e.board,d,i]);Object(n.useEffect)((function(){var e="left"===i.direction?-1:"right"===i.direction?1:null,t="up"===i.direction?-1:"down"===i.direction?1:null,a=setInterval((function(){b(i.x,i.y,e,t,i.direction)}),300);return function(){clearInterval(a)}}),[b,i.direction,i.x,i.y]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var f=100*i.x/28,g=100*i.y/31;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerGhost",style:Object.assign({left:f+"%",top:g+"%"},{})},r.a.createElement("div",{className:"ghost"},r.a.createElement("div",{className:"eyes"}),r.a.createElement("div",{className:"skirt"}))))})),k=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,0,0,1,2,1,0,0,0,1,2,1,1,2,1,0,0,0,1,2,1,0,0,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,0,0,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],_=Object(n.forwardRef)((function(e,t){var a=Object(n.useRef)(),o=Object(n.useRef)([]),i=Object(n.useState)(null),u=Object(l.a)(i,2),b=u[0],g=u[1],p=Object(n.useState)({board:k,x:12,old_x:12,y:17,old_y:17,direction:"right",score:0}),h=Object(l.a)(p,2),O=h[0],_=h[1],N=Object(n.useCallback)((function(e,t,a){var n=null;return"right"===a&&(n=O.board[t][e+1]),"left"===a&&(n=O.board[t][e-1]),"down"===a&&(n=O.board[t+1][e]),"up"===a&&(n=O.board[t-1][e]),n}),[O]),I=Object(n.useCallback)((function(e,t,n,r,o){var i=e,c=t,l=Object(s.a)(O.board),u=N(i,c,o);if(1!==u){var d=i,f=c,g=O.score;1!==u&&("right"===o&&i<27&&(d+=1),"left"===o&&i>0&&(d-=1),"down"===o&&c<30&&(f+=1),"up"===o&&c>0&&(f-=1)),2===u?(a.current.play("eating",b.eating[0],b.eating[1]),g+=1,l[f][d]=0):3===u&&(l[f][d]=0,a.current.play("eating2",b.eating2[0],b.eating2[1])),_({x:d,y:f,board:l,old_x:i,old_y:c,direction:o,score:g,sign:n?Math.sign(n):Math.sign(r)})}}),[O.board,O.score,N,b]),C=Object(n.useCallback)((function(e){switch(e.keyCode){case 37:_(Object(c.a)(Object(c.a)({},O),{},{direction:"left",sign:-1}));break;case 39:_(Object(c.a)(Object(c.a)({},O),{},{direction:"right",sign:1}));break;case 38:_(Object(c.a)(Object(c.a)({},O),{},{direction:"up",sign:-1}));break;case 40:_(Object(c.a)(Object(c.a)({},O),{},{direction:"down",sign:1}))}}),[O]);Object(n.useEffect)((function(){b||g({start:[f.a,"start"],die:[m.a,"die"],eatghost:[v.a,"eatghost"],eatpill:[d.a,"eatpill"],eating:[j.a,"eating"],eating2:[y.a,"eating2"]})}),[b]),Object(n.useEffect)((function(){var e="left"===O.direction?-1:"right"===O.direction?1:null,t="up"===O.direction?-1:"down"===O.direction?1:null;window.addEventListener("keydown",C);var a=setInterval((function(){I(O.x,O.y,e,t,O.direction)}),300);return function(){window.removeEventListener("keydown",C),clearInterval(a)}}),[I,C,O.direction,O.x,O.y]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var H=100*O.x/28,S=100*O.y/31,L={};return"down"===O.direction?L={marginTop:"10px",marginLeft:"13px"}:"up"===O.direction&&(L={marginTop:"10px",marginLeft:"-9px"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerPacman",style:Object.assign({left:H+"%",top:S-3+"%",transform:"left"===O.direction||"right"===O.direction?"scaleX(".concat(O.sign):"rotate(".concat(90*O.sign,"deg")},L)},r.a.createElement("div",{className:"pacman"},r.a.createElement("div",{className:"pacman__eye"}),r.a.createElement("div",{className:"pacman__mouth"}))),r.a.createElement(x,{ref:o,board:O.board}),r.a.createElement(w,{board:O.board}),r.a.createElement(E,{ref:a,audioFiles:b,soundDisabled:!1}))}));a(21);var N=function(){return r.a.createElement("div",{className:"board"},r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.b566d5bd.chunk.js.map