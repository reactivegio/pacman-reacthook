(this["webpackJsonppacman-reactjs"]=this["webpackJsonppacman-reactjs"]||[]).push([[0],[,,,function(e,t,a){},,,,,,function(e,t,a){e.exports=a.p+"static/media/eatpill.083d62b4.ogg"},function(e,t,a){e.exports=a.p+"static/media/opening_song.f653b7b5.ogg"},function(e,t,a){e.exports=a.p+"static/media/die.70171cce.ogg"},function(e,t,a){e.exports=a.p+"static/media/eatghost.45f4836c.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.short.36b2a2b3.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.b8372a5b.ogg"},function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=(a(20),a(1)),s=a(4),l=a(2),u=a(9),d=a.n(u),b=a(10),f=a.n(b),m=a(11),g=a.n(m),p=a(12),v=a.n(p),y=a(13),h=a.n(y),j=a(14),O=a.n(j),E=Object(n.forwardRef)((function(e,t){var a=e.audioFiles,o=(e.soundDisabled,e.game,Object(n.useState)([])),c=Object(l.a)(o,2),i=c[0],s=(c[1],Object(n.useState)([])),u=Object(l.a)(s,2),d=u[0],b=(u[1],Object(n.useState)([])),f=Object(l.a)(b,2),m=f[0],g=f[1];Object(n.useCallback)((function(e){var t,n=[],r=!1;if(a&&0!==a.length){for(a[e].removeEventListener("ended",i[e],!0),t=0;t<m.length;t++)!r&&m[t]?r=!0:n.push(m[t]);g(n)}}),[a,i,m]),Object(n.useCallback)((function(e,t,n){e.loaded===e.total&&"function"===typeof n&&(n(),a[t].removeEventListener("canplaythrough",d[t],!0))}),[a,d]);return Object(n.useImperativeHandle)(t,(function(){return{play:function(e,t,a){if(!t)return null;var n;if(document.getElementById(e+"_audio")){(n=document.getElementById(e+"_audio")).playbackRate=1.5;var r=n.play();void 0!==r&&r.then((function(e){console.log("Audio actived")})).catch((function(e){console.log("Audio load prevented")}))}else(n=document.createElement("audio")).setAttribute("id",e+"_audio"),n.setAttribute("preload","true"),n.setAttribute("autobuffer","true"),n.setAttribute("src",t),n.autoplay=!0,n.load(),n.addEventListener("load",(function(){n.play()}),!0);document.body.appendChild(n)},disableSound:function(){for(var e=0;e<m.length;e++)a[m[e]].pause(),a[m[e]].currentTime=0;g([])},pause:function(){for(var e=0;e<m.length;e++)a[m[e]].pause()},resume:function(){for(var e=0;e<m.length;e++)a[m[e]].play()}}}),[a,m]),r.a.createElement("div",{className:"audio_empty",ref:t})})),w=(a(3),function(e){return r.a.createElement("div",{className:"scoreBoard"},function(){for(var t=[],a=0;a<e.life;a++)t.push(r.a.createElement("div",{className:"hearth"}));return t}())}),x=Object(n.forwardRef)((function(e,t){return e.board.map((function(e,t){return r.a.createElement("div",{className:"row"},e.map((function(e,t){var a="square";return 0===e&&(a="square"),1===e&&(a="square wall"),2===e&&(a="square dot"),3===e&&(a="square power dot"),r.a.createElement("div",{className:a})})))}))})),k=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({x:13,old_x:13,y:14,old_y:14,direction:"up",isExitHouse:!1}),o=Object(l.a)(a,2),c=o[0],u=o[1],d=Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]),b=Object(n.useCallback)((function(t,a,n,r,o){e.pacmanMove;var l=t,b=a,f=Object(s.a)(e.playerPos.board),m=["up","down","left","right"],g=d(l,b,o),p=m[Math.floor(Math.random()*m.length)];if(1!==g){var v=l,y=b,h=c.score;1!==g&&("right"===o&&l<27&&(v+=1),"left"===o&&l>0&&(v-=1),"down"===o&&b<30&&(y+=1),"up"===o&&b>0&&(y-=1)),u({x:v,y:y,board:f,old_x:l,old_y:b,direction:o,score:h,sign:n?Math.sign(n):Math.sign(r)})}else u(Object(i.a)(Object(i.a)({},c),{},{direction:p}))}),[e,d,c]);Object(n.useEffect)((function(){var t="left"===c.direction?-1:"right"===c.direction?1:null,a="up"===c.direction?-1:"down"===c.direction?1:null,n=setInterval((function(){2===e.gameState&&b(c.x,c.y,t,a,c.direction)}),300);return function(){clearInterval(n)}}),[b,c.direction,c.x,c.y,e.gameState]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var f=100*c.x/28,m=100*c.y/31;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerGhost",style:Object.assign({left:f+"%",top:m+"%"},{})},r.a.createElement("div",{className:"ghost",style:{background:"red"}},r.a.createElement("div",{className:"eyes "+c.direction}),r.a.createElement("div",{className:"skirt"}))))})),_=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({x:14,old_x:14,y:14,old_y:14,direction:"up",isExitHouse:!1}),o=Object(l.a)(a,2),c=o[0],u=o[1],d=Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]),b=Object(n.useCallback)((function(t,a,n,r,o){var l=t,b=a,f=Object(s.a)(e.playerPos.board),m=c.isExitHouse?["up","down","left","right"]:["left","right"],g=d(l,b,o),p=m[Math.floor(Math.random()*m.length)];if(1!==g){var v=l,y=b,h=c.score;1!==g&&("right"===o&&l<27&&(v+=1),"left"===o&&l>0&&(v-=1),"down"===o&&b<30&&(y+=1),"up"===o&&b>0&&(y-=1)),u({x:v,y:y,board:f,old_x:l,old_y:b,direction:o,score:h,sign:n?Math.sign(n):Math.sign(r),isExitHouse:c.isExitHouse})}else u(Object(i.a)(Object(i.a)({},c),{},{direction:p,isExitHouse:!0}))}),[e.playerPos.board,d,c]);Object(n.useEffect)((function(){var t="left"===c.direction?-1:"right"===c.direction?1:null,a="up"===c.direction?-1:"down"===c.direction?1:null,n=setInterval((function(){2===e.gameState&&b(c.x,c.y,t,a,c.direction)}),300);return function(){clearInterval(n)}}),[b,c.direction,c.x,c.y,e.gameState]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var f=100*c.x/28,m=100*c.y/31;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerGhost",style:Object.assign({left:f+"%",top:m+"%"},{})},r.a.createElement("div",{className:"ghost",style:{background:"#71F3DA"}},r.a.createElement("div",{className:"eyes "+c.direction}),r.a.createElement("div",{className:"skirt"}))))})),N=function(e){Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]);return r.a.createElement("div",{className:"boardCenteredMsg"},e.message)},P=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,0,0,1,2,1,0,0,0,1,2,1,1,2,1,0,0,0,1,2,1,0,0,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,0,0,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],S=Object(n.forwardRef)((function(e,t){var a=Object(n.useRef)(),o=Object(n.useRef)(),c=Object(n.useRef)(),u=Object(n.useState)(1),b=Object(l.a)(u,2),m=b[0],p=b[1],y=Object(n.useState)(null),j=Object(l.a)(y,2),S=j[0],C=j[1],I=Object(n.useState)({board:P,x:12,old_x:12,y:17,old_y:17,direction:"right",score:0}),M=Object(l.a)(I,2),H=M[0],R=M[1],A=Object(n.useCallback)((function(e,t,a){var n=null;return"right"===a&&(n=H.board[t][e+1]),"left"===a&&(n=H.board[t][e-1]),"down"===a&&(n=H.board[t+1][e]),"up"===a&&(n=H.board[t-1][e]),n}),[H]),L=Object(n.useCallback)((function(e,t,n,r,o){var c=e,i=t,l=Object(s.a)(H.board),u=A(c,i,o);if(1!==u){var d=c,b=i,f=H.score;1!==u&&("right"===o&&c<27&&(d+=1),"left"===o&&c>0&&(d-=1),"down"===o&&i<30&&(b+=1),"up"===o&&i>0&&(b-=1)),2===u?(a.current.play("eating",S.eating[0],S.eating[1]),f+=1,l[b][d]=0):3===u&&(l[b][d]=0,a.current.play("eating2",S.eating2[0],S.eating2[1])),R({x:d,y:b,board:l,old_x:c,old_y:i,direction:o,score:f,sign:n?Math.sign(n):Math.sign(r)})}}),[H.board,H.score,A,S]),F=Object(n.useCallback)((function(e){switch(e.keyCode){case 78:p(3),a.current.play("start",S.start[0],S.start[1]),setTimeout((function(){p(2)}),4e3);break;case 37:R(Object(i.a)(Object(i.a)({},H),{},{direction:"left",sign:-1}));break;case 39:R(Object(i.a)(Object(i.a)({},H),{},{direction:"right",sign:1}));break;case 38:R(Object(i.a)(Object(i.a)({},H),{},{direction:"up",sign:-1}));break;case 40:R(Object(i.a)(Object(i.a)({},H),{},{direction:"down",sign:1}))}}),[S,H]);Object(n.useEffect)((function(){S||C({start:[f.a,"start"],die:[g.a,"die"],eatghost:[v.a,"eatghost"],eatpill:[d.a,"eatpill"],eating:[h.a,"eating"],eating2:[O.a,"eating2"]})}),[S]),Object(n.useEffect)((function(){var e="left"===H.direction?-1:"right"===H.direction?1:null,t="up"===H.direction?-1:"down"===H.direction?1:null;window.addEventListener("keydown",F);var a=setInterval((function(){2===m&&L(H.x,H.y,e,t,H.direction)}),300);return function(){window.removeEventListener("keydown",F),clearInterval(a)}}),[m,L,F,H.direction,H.x,H.y]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var q=100*H.x/28,B=100*H.y/31,T={};return"down"===H.direction?T={marginTop:"10px",marginLeft:"13px"}:"up"===H.direction&&(T={marginTop:"10px",marginLeft:"-9px"}),r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{life:3}),r.a.createElement("div",{className:"containerPacman",style:Object.assign({left:q+"%",top:B-3+"%",transform:"left"===H.direction||"right"===H.direction?"scaleX(".concat(H.sign):"rotate(".concat(90*H.sign,"deg")},T)},r.a.createElement("div",{className:"pacman"},r.a.createElement("div",{className:"pacman__eye"}),r.a.createElement("div",{className:"pacman__mouth"}))),r.a.createElement(_,{gameState:m,ref:o,playerPos:H}),r.a.createElement(k,{gameState:m,ref:c,playerPos:H}),r.a.createElement(x,{board:H.board}),1===m||4===m?r.a.createElement(N,{message:"Press n to start new game"}):null,r.a.createElement(E,{ref:a,audioFiles:S,soundDisabled:!1}))}));a(21);var C=function(){return r.a.createElement("div",{className:"board"},r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.643fb9b4.chunk.js.map