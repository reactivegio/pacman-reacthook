(this["webpackJsonppacman-reactjs"]=this["webpackJsonppacman-reactjs"]||[]).push([[0],[,,,function(e,t,a){},,,,,,function(e,t,a){e.exports=a.p+"static/media/eatpill.083d62b4.ogg"},function(e,t,a){e.exports=a.p+"static/media/opening_song.f653b7b5.ogg"},function(e,t,a){e.exports=a.p+"static/media/die.70171cce.ogg"},function(e,t,a){e.exports=a.p+"static/media/eatghost.45f4836c.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.short.36b2a2b3.ogg"},function(e,t,a){e.exports=a.p+"static/media/eating.b8372a5b.ogg"},function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(20),a(1)),l=a(4),s=a(2),d=a(9),u=a.n(d),f=a(10),b=a.n(f),m=a(11),g=a.n(m),p=a(12),v=a.n(p),y=a(13),h=a.n(y),j=a(14),O=a.n(j),E=Object(n.forwardRef)((function(e,t){var a=e.audioFiles,o=(e.soundDisabled,e.game,Object(n.useState)([])),i=Object(s.a)(o,2),c=i[0],l=(i[1],Object(n.useState)([])),d=Object(s.a)(l,2),u=d[0],f=(d[1],Object(n.useState)([])),b=Object(s.a)(f,2),m=b[0],g=b[1];Object(n.useCallback)((function(e){var t,n=[],r=!1;if(a&&0!==a.length){for(a[e].removeEventListener("ended",c[e],!0),t=0;t<m.length;t++)!r&&m[t]?r=!0:n.push(m[t]);g(n)}}),[a,c,m]),Object(n.useCallback)((function(e,t,n){e.loaded===e.total&&"function"===typeof n&&(n(),a[t].removeEventListener("canplaythrough",u[t],!0))}),[a,u]);return Object(n.useImperativeHandle)(t,(function(){return{play:function(e,t,a){if(!t)return null;var n;if(document.getElementById(e+"_audio")){(n=document.getElementById(e+"_audio")).playbackRate=1.5;var r=n.play();void 0!==r&&r.then((function(e){console.log("Audio actived")})).catch((function(e){console.log("Audio load prevented")}))}else(n=document.createElement("audio")).setAttribute("id",e+"_audio"),n.setAttribute("preload","true"),n.setAttribute("autobuffer","true"),n.setAttribute("src",t),n.autoplay=!0,n.load(),n.addEventListener("load",(function(){n.play()}),!0);document.body.appendChild(n)},disableSound:function(){for(var e=0;e<m.length;e++)a[m[e]].pause(),a[m[e]].currentTime=0;g([])},pause:function(){for(var e=0;e<m.length;e++)a[m[e]].pause()},resume:function(){for(var e=0;e<m.length;e++)a[m[e]].play()}}}),[a,m]),r.a.createElement("div",{className:"audio_empty",ref:t})})),x=(a(3),function(e){return r.a.createElement("div",{className:"scoreBoard"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flex:"1 0 50%"}},r.a.createElement("div",{style:{position:"absolute",marginTop:"-10px",fontWeight:600}},"life:"," "),function(){for(var t=[],a=0;a<e.life;a++)t.push(r.a.createElement("div",{className:"hearth"}));return t}()),r.a.createElement("div",{style:{flex:"1 0 50%"}},r.a.createElement("div",{style:{position:"absolute",marginTop:"-10px",fontWeight:600}},"score:"," "),r.a.createElement("div",{style:{marginTop:"10px",fontSize:"25px",fontWeight:"bold"}},e.score))))}),w=Object(n.forwardRef)((function(e,t){return e.board.map((function(e,t){return r.a.createElement("div",{className:"row"},e.map((function(e,t){var a="square";return 0===e&&(a="square"),1===e&&(a="square wall"),2===e&&(a="square dot"),3===e&&(a="square power dot"),r.a.createElement("div",{className:a})})))}))})),k=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({x:13,old_x:13,y:14,old_y:14,direction:"up",isExitHouse:!1}),o=Object(s.a)(a,2),i=o[0],d=o[1],u=Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]),f=Object(n.useCallback)((function(t,a,n,r,o){e.pacmanMove;var s=t,f=a,b=Object(l.a)(e.playerPos.board),m=["up","down","left","right"],g=u(s,f,o),p=m[Math.floor(Math.random()*m.length)];if(1!==g){var v=s,y=f,h=i.score;1!==g&&("right"===o&&s<27&&(v+=1),"left"===o&&s>0&&(v-=1),"down"===o&&f<30&&(y+=1),"up"===o&&f>0&&(y-=1)),d({x:v,y:y,board:b,old_x:s,old_y:f,direction:o,score:h,sign:n?Math.sign(n):Math.sign(r)})}else d(Object(c.a)(Object(c.a)({},i),{},{direction:p}))}),[e,u,i]);Object(n.useEffect)((function(){var t="left"===i.direction?-1:"right"===i.direction?1:null,a="up"===i.direction?-1:"down"===i.direction?1:null,n=setInterval((function(){2===e.gameState&&f(i.x,i.y,t,a,i.direction)}),300);return function(){clearInterval(n)}}),[f,i.direction,i.x,i.y,e.gameState]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var b=100*i.x/28,m=100*i.y/31;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerGhost",style:Object.assign({left:b+"%",top:m+"%"},{})},r.a.createElement("div",{className:"ghost",style:{background:"red"}},r.a.createElement("div",{className:"eyes "+i.direction}),r.a.createElement("div",{className:"skirt"}))))})),_=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({x:14,old_x:14,y:14,old_y:14,direction:"up",isExitHouse:!1}),o=Object(s.a)(a,2),i=o[0],d=o[1],u=Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]),f=Object(n.useCallback)((function(t,a,n,r,o){var s=t,f=a,b=Object(l.a)(e.playerPos.board),m=i.isExitHouse?["up","down","left","right"]:["left","right"],g=u(s,f,o),p=m[Math.floor(Math.random()*m.length)];if(1!==g){var v=s,y=f,h=i.score;1!==g&&("right"===o&&s<27&&(v+=1),"left"===o&&s>0&&(v-=1),"down"===o&&f<30&&(y+=1),"up"===o&&f>0&&(y-=1)),d({x:v,y:y,board:b,old_x:s,old_y:f,direction:o,score:h,sign:n?Math.sign(n):Math.sign(r),isExitHouse:i.isExitHouse})}else d(Object(c.a)(Object(c.a)({},i),{},{direction:p,isExitHouse:!0}))}),[e.playerPos.board,u,i]);Object(n.useEffect)((function(){var t="left"===i.direction?-1:"right"===i.direction?1:null,a="up"===i.direction?-1:"down"===i.direction?1:null,n=setInterval((function(){2===e.gameState&&f(i.x,i.y,t,a,i.direction)}),300);return function(){clearInterval(n)}}),[f,i.direction,i.x,i.y,e.gameState]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var b=100*i.x/28,m=100*i.y/31;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerGhost",style:Object.assign({left:b+"%",top:m+"%"},{})},r.a.createElement("div",{className:"ghost",style:{background:"#71F3DA"}},r.a.createElement("div",{className:"eyes "+i.direction}),r.a.createElement("div",{className:"skirt"}))))})),N=function(e){Object(n.useCallback)((function(t,a,n){var r=null;return"right"===n&&(r=e.playerPos.board[a][t+1]),"left"===n&&(r=e.playerPos.board[a][t-1]),"down"===n&&(r=e.playerPos.board[a+1][t]),"up"===n&&(r=e.playerPos.board[a-1][t]),r}),[e]);return r.a.createElement("div",{className:"boardCenteredMsg"},e.message)},P=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,0,0,1,2,1,0,0,0,1,2,1,1,2,1,0,0,0,1,2,1,0,0,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,0,0,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,0],[1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,1,2,1,0,0,0,0,0],[0,0,0,0,0,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,2,1,1,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,1,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1],[1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],S=Object(n.forwardRef)((function(e,t){var a=Object(n.useRef)(),o=Object(n.useRef)(),i=Object(n.useRef)(),d=Object(n.useState)(1),f=Object(s.a)(d,2),m=f[0],p=f[1],y=Object(n.useState)(null),j=Object(s.a)(y,2),S=j[0],C=j[1],I=Object(n.useState)({board:P,x:12,old_x:12,y:17,old_y:17,direction:"right",score:0}),M=Object(s.a)(I,2),H=M[0],R=M[1],A=Object(n.useCallback)((function(e,t,a){var n=null;return"right"===a&&(n=H.board[t][e+1]),"left"===a&&(n=H.board[t][e-1]),"down"===a&&(n=H.board[t+1][e]),"up"===a&&(n=H.board[t-1][e]),n}),[H]),L=Object(n.useCallback)((function(e,t,n,r,o){var i=e,c=t,s=Object(l.a)(H.board),d=A(i,c,o);if(1!==d){var u=i,f=c,b=H.score;1!==d&&("right"===o&&i<27&&(u+=1),"left"===o&&i>0&&(u-=1),"down"===o&&c<30&&(f+=1),"up"===o&&c>0&&(f-=1)),2===d?(a.current.play("eating",S.eating[0],S.eating[1]),b+=1,s[f][u]=0):3===d&&(s[f][u]=0,a.current.play("eating2",S.eating2[0],S.eating2[1])),R({x:u,y:f,board:s,old_x:i,old_y:c,direction:o,score:b,sign:n?Math.sign(n):Math.sign(r)})}}),[H.board,H.score,A,S]),T=Object(n.useCallback)((function(e){switch(e.keyCode){case 78:p(3),a.current.play("start",S.start[0],S.start[1]),setTimeout((function(){p(2)}),4e3);break;case 37:R(Object(c.a)(Object(c.a)({},H),{},{direction:"left",sign:-1}));break;case 39:R(Object(c.a)(Object(c.a)({},H),{},{direction:"right",sign:1}));break;case 38:R(Object(c.a)(Object(c.a)({},H),{},{direction:"up",sign:-1}));break;case 40:R(Object(c.a)(Object(c.a)({},H),{},{direction:"down",sign:1}))}}),[S,H]);Object(n.useEffect)((function(){S||C({start:[b.a,"start"],die:[g.a,"die"],eatghost:[v.a,"eatghost"],eatpill:[u.a,"eatpill"],eating:[h.a,"eating"],eating2:[O.a,"eating2"]})}),[S]),Object(n.useEffect)((function(){var e="left"===H.direction?-1:"right"===H.direction?1:null,t="up"===H.direction?-1:"down"===H.direction?1:null;window.addEventListener("keydown",T);var a=setInterval((function(){2===m&&L(H.x,H.y,e,t,H.direction)}),300);return function(){window.removeEventListener("keydown",T),clearInterval(a)}}),[m,L,T,H.direction,H.x,H.y]),Object(n.useImperativeHandle)(t,(function(){return{}}),[]);var F=100*H.x/28,q=100*H.y/31,B={};return"down"===H.direction?B={marginTop:"10px",marginLeft:"13px"}:"up"===H.direction&&(B={marginTop:"10px",marginLeft:"-9px"}),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{life:3,score:H.score}),r.a.createElement("div",{className:"containerPacman",style:Object.assign({left:F+"%",top:q-3+"%",transform:"left"===H.direction||"right"===H.direction?"scaleX(".concat(H.sign):"rotate(".concat(90*H.sign,"deg")},B)},r.a.createElement("div",{className:"pacman"},r.a.createElement("div",{className:"pacman__eye"}),r.a.createElement("div",{className:"pacman__mouth"}))),r.a.createElement(_,{gameState:m,ref:o,playerPos:H}),r.a.createElement(k,{gameState:m,ref:i,playerPos:H}),r.a.createElement(w,{board:H.board}),1===m||4===m?r.a.createElement(N,{message:"Press n to start new game"}):null,r.a.createElement(E,{ref:a,audioFiles:S,soundDisabled:!1}))}));a(21);var C=function(){return r.a.createElement("div",{className:"board"},r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.3102bb5e.chunk.js.map